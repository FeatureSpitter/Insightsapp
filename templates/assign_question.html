{% extends 'layout.html' %}

{% block body %}


  {% if type == 'questao' %}
  
  <div class="d-flex justify-content-center">
 
  <h1>Assign Quastion</h1>
  {% from "includes/_formhelpers.html" import render_field %}
  <form method="POST" action="/assign_question/{{id}}/question">
    <div class="form-group">
      {{ render_field(form.pergunta, class_="form-control") }}
    </div>
    
    <p><input class="btn btn-success" type="submit" value="Gravar">
  </form>
  {% else %}
  <div class="card border-success mb-3 mt-5" style="max-width: 18rem;">
    <div class="card-header bg-transparent border-success">Upload Audio</div>

    <div class="card-body text-success">
      <form method="POST" action="/assign_question/{{id}}/audio" enctype="multipart/form-data">
        <div class="form-group">
          <label for="Idioma"><i class="fa fa-language" aria-hidden="true"></i> Idiomas</label>
         <select name="Idioma" id="idioma">
          {% for option in options %}
                      <option value="{{option[1]}}">{{option[1]}}</option>
                      {% endfor %}
         </select>
        </div>
        <label for="question_audio">URL do Áudio</label>
        <div class="form-group mb-3">
          <input type="text" id="con_audio" name="con_audio" class="input-custom">
          <div class="file-upload">
            <label for="file-upload" class="custom-file-upload">
              <i class="fas fa-cloud-upload-alt"></i> Upload
            </label>
            <input id="file-upload" type="file" name="audio" accept="audio/*" class="file-upload-input px-5"/>
          </div>
        </div>
        <div class="audio-preview-container" id="audio-insert">
          <h5>Prévia do Áudio</h5>
          <audio id="audio-preview" controls></audio>
        </div>
          
            <div class="card-footer bg-transparent border-success"><button type="submit" class="btn btn-info mx-2"><i class="fas fa-paper-plane mx-2"></i>Send file</button>
            </div>
          </div>
      </form>  
      </div>
  
  </div>

</div>

<script>

document.getElementById('file-upload').addEventListener('change', function(event) {
      var audioPreview = document.getElementById('audio-preview');
      var introAudio = document.getElementById('intro_audio');
      var audioInsert = document.getElementById('audio-insert');
      var file = event.target.files[0];
      introAudio.value = event.target.value;
      if (file) {
        var reader = new FileReader();
        reader.onload = function(e) {
          audioPreview.src = e.target.result;
          audioInsert.style.display = 'block';
        };
        reader.readAsDataURL(file);
      }
    });

</script>
  {% endif %}
{% endblock %}